{% load menu_tags common_tags %}

<div id="newstream-mobile-mainmenu" class="bg-white flex flex-col items-stretch">
    <div class="btm-grey-border flex justify-end items-center py-6 px-8">
        <div id="close-nav-toggle" class="focus:outline-none cursor-pointer" onclick="toggleSidenav();">
            <span></span>
            <span></span>
        </div>
    </div>
    {% for item in menu_items %}
    <div class="btm-grey-border">
        <div class="menu-item-wrapper">
            <a href="{{ item.href }}" class="{{ item.active_class }} menu-item flex items-center">{{ item.text }}</a>
        </div>
        {% if item.has_children_in_menu %}
        {% sub_menu item %}
        {% endif %}
    </div>
    {% endfor %}
    {% if user.is_authenticated %}
    <div class="menu-item-wrapper btm-grey-border">
        <div class="mb-3 flex items-center">
            <span class="avatar-icon mr-2"></span>
            <span class="menu-item">{{ user|display_username }}</span>
        </div>
        <div class="flex flex-col user-area-links">
            <div class="mb-3">
                <a href="{% url 'personal-info' %}" class="user-link">Profile Settings</a>
            </div>
            <div class="mb-3">
                <a href="{% url 'donations:my-donations' %}" class="user-link">My Donations</a>
            </div>
            <div class="mb-3">
                <a href="{% url 'account_logout' %}" class="user-link">Logout</a>
            </div>
        </div>
    </div>
    {% else %}
    <div class="menu-item-wrapper btm-grey-border">
        <a href="{% url 'account_login' %}{{ request|next_path_filter }}" class="menu-item">Sign in</a>]
    </div>
    {% endif %}
    <div class="px-6 py-8 flex">
        <a href="{% url 'donations:donate'%}" class="menu-item nav-donate-btn text-center w-full">Donate</a>
    </div>
</div>