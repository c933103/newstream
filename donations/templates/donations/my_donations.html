{% extends "base.html" %}
{% load static common_tags %}

{% block title %}My Donations{% endblock %}
{% block body_class %}my-donations-page{% endblock %}

{% block content %}
<div class="w-full bg-primary-dark">
    <div class="container">
        <h1 class="mb-4 text-white">My donations</h1>
        <p class="text-primary-light lg:w-3/4">View and manage your donations here. We thank you so much for your
            support.
            Every contribution, however big or small, is
            valuable for our future and our ability to deliver quality journalism thatâ€™s independent, not-for-profit,
            and
            free of
            charge.</p>
    </div>
</div>
<div class="container">
    <table class="w-full my-donations-table">
        <thead>
            <tr>
                <th>Donation Amount</th>
                <th>Donation Frequency</th>
                <th>Order Number</th>
                <th>Date</th>
                <th>Payment Method</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% if donations %}
            {% for donation in donations %}
            <tr>
                <td>{{ donation|amount_with_currency }}</td>
                <td>{{ donation.donation_frequency }}</td>
                <td>{{ donation.order_number }}</td>
                <td>{{ donation.created_at|date:'j M Y' }}</td>
                <td>{{ donation.gateway.frontend_label }}</td>
                <td>
                    {% if donation.is_recurring %}
                    <div class="more-dropdown-div flex items-center dropdown-div-wrapper">
                        <input type="checkbox" name="m_dropdown-toggle-checkbox"
                            id="m_dropdown-toggle-checkbox{{forloop.counter}}" class="dropdown-toggle-checkbox">
                        <label for="m_dropdown-toggle-checkbox{{forloop.counter}}"
                            class="dropdown-toggle-label"></label>
                        <span class="three-dots-icon"></span>
                        <div class="more-dropdown-menu flex flex-col items-stretch">
                            {% if request.user.is_email_verified %}
                            <a href="#">View all renewals</a>
                            <a href="#">Edit donation</a>
                            <a href="#">Cancel donation</a>
                            {% else %}
                            <a class="actions-locked" href="#">Actions locked (Email unverified)</a>
                            {% endif %}
                        </div>
                    </div>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
            {% else %}
            <tr>
                <td colspan="5">No Donation History.</td>
            </tr>
            {% endif %}
        </tbody>
    </table>
</div>
{% endblock content %}